# Supported Values: `flux`
# TODO: Support `argo`
solution:
  name: flux
  interval: 10m

# Prefix for global resources. Defaults to `namespace` if unset.
prefix: ""

apps:
  certManager:
    enabled: true
    istioEnabled: true
    namespace: cert-manager
    version: "1.8.2"
    webhookSecurePort: 10260
    annotations: {}
    serviceAccountAnnotations: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}
  externalDns:
    enabled: false
    istioEnabled: true
    namespace: external-dns
    version: "6.7.2"
    annotations: {}
    serviceAccountAnnotations: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}
  istio:
    enabled: true
    mTLSMode: "PERMISSIVE" # Options here are UNSET, DISABLE, PERMISSIVE, and STRICT
    annotations: {}
    serviceAccountAnnotations: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}
    # The namespace to target for all HelmReleases
    namespace: istio-system
    helmRepository:
      # creates the flux helmrepository CR
      create: true
      # namespace to create the CR in
      namespace: flux-system
      # name of CR
      name: istio
      # refresh interval
      interval: 10m
    helmRelease:
      # the namespace where the HelmRelease CR is installed to
      releaseNamespace: flux-system
      enabled: true
      # istio base chart release
      base:
        # Installs the base chart via HelmRelease. The base chart
        # installs CRDs and RBAC
        enabled: true
        # HelmRelease CR name
        name: istio-base
        # Helm chart version
        version: "1.15.1"
        # HelmRelease interval
        interval: "1h0m0s"
        # CRD policies
        # override defaults
        crds:
          install: Create
          update: CreateReplace
        # Override HelmRelease values
        values: {}
  kyverno:
    enabled: true
    istioEnabled: true
    version: "2.5.1"
    namespace: kyverno
    annotations: {}
    serviceAccountAnnotations: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}
  kyvernoPolicies:
    enabled: true
    istioEnabled: true
    version: "2.5.1"
    namespace: kyverno
    podSecurityStandard: "baseline"
    annotations: {}
    serviceAccountAnnotations: {}
  minioOperator:
    enabled: false
    istioEnabled: true
    version: "4.4.27"
    namespace: minio-operator
    annotations: {}
    serviceAccountAnnotations: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}
  minioTenant:
    enabled: false
    istioEnabled: false
    version: "4.4.27"
    namespace: minio-tenant
    storageClassName: gp2
    annotations: {}
    serviceAccountAnnotations: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}
  vaultOperator:
    enabled: true
    istioEnabled: true
    version: "1.16.1"
    namespace: vault-operator
    annotations: {}
    serviceAccountAnnotations: {}
    nodeSelector: {}
    tolerations: []
    affinity: {}

# Global Pod Assignment
global:
  affinity: {}
  istioEnabled: false
  nodeSelector: {}
  tolerations: []

# Skyfjell Flux HelmRepository Reference
helmRepository:
  name: skyfjell
  namespace: flux-system
